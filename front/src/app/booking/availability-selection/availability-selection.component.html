<form *ngIf="form$ | async as form" [formGroup]="form">
  <ng-container formGroupName="availability">
    <div class="input-group">
      <h3 translate>BOOKING.availability.availabilities</h3>
      <app-calendar-view
        [class.error]="(step.submitted || form.get('availability')?.touched) && form.get('availability')?.errors?.['noControlsSet']"
        *ngIf="shop$ | async as shop"
        formControlName="availabilities"
        view="month"
        [shopUrl]="shop.url"
      ></app-calendar-view>
      <div *ngIf="form.get(['availability', 'availabilities'])?.value.length">
        <h4
          translate
          [translateParams]="{
            count: form.get(['availability', 'availabilities'])?.value.length
          }"
        >
          BOOKING.availability.selected_availabilities
        </h4>
        <app-calendar-selected> </app-calendar-selected>
      </div>
    </div>

    <div class="input-group">
      <h3 translate>BOOKING.availability.customer_availability</h3>

      <textarea
        id="customer_availability"
        class="break-lines"
        formControlName="customer_availability"
        rows="6"
        [placeholder]="'BOOKING.availability.customer_availability' | translate"
        [ngClass]="{
          'is-invalid':
          (step.submitted || form.get('availability')?.touched) && form.get('availability')?.errors?.['noControlsSet']
        }"
      ></textarea>

      <div
        class="error-group"
        *ngIf="
        (step.submitted || form.get('availability')?.touched) && form.get('availability')?.errors?.['noControlsSet']
        "
        translate
      >
        BOOKING.availability.noControlsSet
      </div>
    </div>
  </ng-container>
</form>
